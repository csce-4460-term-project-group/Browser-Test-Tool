<!DOCTYPE html>

<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title>Test HTML 5 Global Attributes Implementation</title>
</head>
<body>
    <script>
        var addText = function (string, div) {
            var p = document.createElement("p");
            p.textContent = string;
            div.appendChild(p);
        }

        var testAccessKey = function (resolve, reject) {
            var div = document.createElement("div");
            addText("Chrome or Edge: Press [Alt] + [Z]", div);
            addText("Firefox: Press [Alt] + [Shift] + [Z]", div);
            addText("Mac: Press [Control] + [Alt] + [Z]", div);
            var button1 = document.createElement("button");
            button1.textContent = "Do Not Click";
            button1.accessKey = "Z";
            button1.onfocus = function () { resolve(div) };
            div.appendChild(button1);
            var button2 = document.createElement("button");
            button2.textContent = "Nothing Happened";
            button2.onclick = function () { reject(div) };
            div.appendChild(button2);
            document.body.appendChild(div);
        };

        var testContentEditable = function (resolve, reject) {
            var div = document.createElement("div");
            addText("Change the text.", div);
            var divText = document.createElement("div");
            divText.style.width = "100px";
            divText.style.height = "100px";
            divText.style.border = "solid";
            divText.textContent = "Type here";
            divText.contentEditable = "true";
            div.appendChild(divText);
            var button = document.createElement("button");
            button.textContent = "Done";
            button.onclick = function () {
                if (divText.textContent == "Type here")
                    reject(div);
                else
                    resolve(div);
            };
            div.appendChild(button);
            document.body.appendChild(div);
        };

        var testDraggable = function (resolve, reject) {
            var div = document.createElement("div");
            addText("Is the red square draggable?", div);
            var divRed = document.createElement("div");
            divRed.style.width = "100px";
            divRed.style.height = "100px";
            divRed.style.backgroundColor = "#FF0000";
            divRed.draggable = "true";
            div.appendChild(divRed);
            var button1 = document.createElement("button");
            button1.textContent = "Yes";
            button1.onclick = function () { resolve(div) };
            div.appendChild(button1);
            var button2 = document.createElement("button");
            button2.textContent = "No";
            button2.onclick = function () { reject(div) };
            div.appendChild(button2);
            document.body.appendChild(div);
        };

        var testSpellcheck = function (resolve, reject) {
            var div = document.createElement("div");
            addText("Use the browser's spellcheck to correct the words.", div);
            var input = document.createElement("input");
            input.value = "compputer refridgerator";
            input.spellcheck = "true";
            div.appendChild(input);
            var button = document.createElement("button");
            button.textContent = "Done";
            button.onclick = function () {
                if (input.value == "computer refrigerator")
                    resolve(div);
                else
                    reject(div);
            };
            div.appendChild(button);
            document.body.appendChild(div);
        }

        var testTabIndex = function (resolve, reject) {
            var div = document.createElement("div");
            addText("Press [tab] 4 times. Type in the number that is in focus or 0 if none are focused.", div);
            var button1 = document.createElement("div");
            button1.textContent = "1";
            button1.tabIndex = "3";
            div.appendChild(button1);
            var button2 = document.createElement("div");
            button2.textContent = "2";
            button2.tabIndex = "2";
            div.appendChild(button2);
            var button3 = document.createElement("div");
            button3.textContent = "3";
            button3.tabIndex = "4";
            div.appendChild(button3);
            var button4 = document.createElement("div");
            button4.textContent = "4";
            button4.tabIndex = "1";
            div.appendChild(button4);
            var input = document.createElement("input");
            input.tabIndex = "5";
            div.appendChild(input);
            var button = document.createElement("button");
            button.textContent = "Done";
            button.tabIndex = "6";
            button.onclick = function () {
                if (input.value == "3")
                    resolve(div);
                else
                    reject(div);
            };
            div.appendChild(button);
            document.body.appendChild(div);
        }

        var testTitle = function (resolve, reject) {
            var div = document.createElement("div");
            addText("Hover over the green square. What does the tooltip say?", div);
            var divGreen = document.createElement("div");
            divGreen.style.width = "100px";
            divGreen.style.height = "100px";
            divGreen.style.backgroundColor = "#00FF00";
            divGreen.title = "red";
            div.appendChild(divGreen);
            var input = document.createElement("input");
            div.appendChild(input);
            var button = document.createElement("button");
            button.textContent = "Done";
            button.onclick = function () {
                if (input.value == "red")
                    resolve(div);
                else
                    reject(div);
            };
            div.appendChild(button);
            document.body.appendChild(div);
        }

        var testTranslate = function (resolve, reject) {
            var div = document.createElement("div");
            div.lang = "de";
            div.translate = "yes";
            addText("Translate this excerpt (Das Märchen by Johann Wolfgang von Goethe) into English.", div);
            addText("Als er vor die Tür hinaus trat, sah er zwei große Irrlichter über dem angebundenen Kahne schweben, die ihm versicherten, daß sie große Eile hätten und schon an jenem Ufer zu sein wünschten. Der Alte säumte nicht, stieß ab und fuhr, mit seiner gewöhnlichen Geschicklichkeit, quer über den Strom, indes die Fremden in einer unbekannten sehr behenden Sprache gegeneinander zischten und mitunter in ein lautes Gelächter ausbrachen, indem sie bald auf den Rändern und Bänken, bald auf dem Boden des Kahns hin- und widerhüpften.", div);
            addText("Did the browser translate the text?", div);
            var button1 = document.createElement("button");
            button1.textContent = "Yes";
            button1.onclick = function () { resolve(div) };
            div.appendChild(button1);
            var button2 = document.createElement("button");
            button2.textContent = "No";
            button2.onclick = function () { reject(div) };
            div.appendChild(button2);
            document.body.appendChild(div);
        }

        var tests = [testAccessKey, testContentEditable, testDraggable, testSpellcheck, testTabIndex, testTitle, testTranslate];
        var globalAttributes = ["accesskey", "contenteditable", "draggable", "spellcheck", "tabindex", "title", "translate"];

        var testGlobalAttribute = function (i) {
            if (i == tests.length) {
                console.log("Tests Complete");
                return;
            }
            new Promise(tests[i]).then(function (div) {
                console.log(globalAttributes[i] + " " + true);
                document.body.removeChild(div);
                testGlobalAttribute(i + 1);
            }).catch(function (div) {
                console.log(globalAttributes[i] + " " + false);
                document.body.removeChild(div);
                testGlobalAttribute(i + 1);
            });
        }

        testGlobalAttribute(0);
    </script>
</body>
</html>